ext.runnableProjects = [project(':gateway'),
                        project(':service-discovery'),
                        project(':project-a:application')]

configure(runnableProjects) {
    apply from: "${rootDir}/gradle/archives-upload.gradle"

    springBoot {
        executable = true
    }

    bootRepackage {
        withJarTask = jar
    }

    afterEvaluate {
        task buildAll {
            dependsOn build
        }
    }
}

configure(subprojects - runnableProjects) {
    tasks.remove(bootRun)

    springBoot {
        executable = false
    }

    bootRepackage {
        enabled = false
    }
}