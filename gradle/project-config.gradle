ext.runnableProjects = [project(':gateway'),
                        project(':service-discovery'),
                        project(':project-a:application')]

configure(runnableProjects) {
    apply from: "${rootDir}/gradle/archives-upload.gradle"

    bootRepackage {
        withJarTask = jar
        executable = true
    }
}

configure(subprojects - runnableProjects) {
    jar {
        enabled = false
    }

    tasks.remove(bootRun)

    bootRepackage {
        enabled = false
        executable = false
        withJarTask = jar
    }
}